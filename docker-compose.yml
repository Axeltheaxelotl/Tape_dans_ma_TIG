version: '3.8'

services:
  # Test complet (ELF + PE)
  woody-test:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: woody_test_all
    volumes:
      - .:/workspace
      - ./docker/test_results:/workspace/docker/test_results
    working_dir: /workspace
    command: docker/test_all.sh
    environment:
      - TERM=xterm-256color
      - WINEARCH=win64
    tty: true

  # Test PE uniquement
  woody-test-pe:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: woody_test_pe
    volumes:
      - .:/workspace
      - ./docker/test_results:/workspace/docker/test_results
    working_dir: /workspace
    command: docker/test_pe.sh
    environment:
      - TERM=xterm-256color
      - WINEARCH=win64
    tty: true

  # Mode d√©veloppement interactif
  woody-dev:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: woody_woodpacker_dev
    volumes:
      - .:/workspace
    working_dir: /workspace
    command: /bin/bash
    environment:
      - TERM=xterm-256color
      - WINEARCH=win64
    tty: true
    stdin_open: true
